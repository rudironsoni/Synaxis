Build started 2/8/2026 3:14:56â€¯AM.
Test run for /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/bin/Debug/net10.0/Synaxis.InferenceGateway.Infrastructure.Tests.dll (.NETCoreApp,Version=v10.0)
VSTest version 18.0.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.5+1b188a7b0a (64-bit .NET 10.0.2)
[xUnit.net 00:00:00.09]   Discovering: Synaxis.InferenceGateway.Infrastructure.Tests
[xUnit.net 00:00:00.17]   Discovered:  Synaxis.InferenceGateway.Infrastructure.Tests
[xUnit.net 00:00:00.22]   Starting:    Synaxis.InferenceGateway.Infrastructure.Tests
[xUnit.net 00:00:00.43]     Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(weakSecret: "admin1234567890123456789012") [FAIL]
[xUnit.net 00:00:00.43]       Expected result.IsValid to be True, but found False.
[xUnit.net 00:00:00.43]       Stack Trace:
[xUnit.net 00:00:00.43]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.43]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.43]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.43]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.43]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.43]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.43]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.43]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/SecurityConfigurationValidatorTests.cs(240,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(String weakSecret)
[xUnit.net 00:00:00.43]            at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
[xUnit.net 00:00:00.43]            at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
[xUnit.net 00:00:00.43]     Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(weakSecret: "secret1234567890123456789012") [FAIL]
[xUnit.net 00:00:00.43]       Expected result.IsValid to be True, but found False.
[xUnit.net 00:00:00.43]       Stack Trace:
[xUnit.net 00:00:00.43]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.43]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.43]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.43]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.43]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.43]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.43]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.43]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/SecurityConfigurationValidatorTests.cs(240,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(String weakSecret)
[xUnit.net 00:00:00.43]            at InvokeStub_SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(Object, Span`1)
[xUnit.net 00:00:00.43]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
[xUnit.net 00:00:00.44]     Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(weakSecret: "test12345678901234567890123") [FAIL]
[xUnit.net 00:00:00.44]       Expected result.IsValid to be True, but found False.
[xUnit.net 00:00:00.44]       Stack Trace:
[xUnit.net 00:00:00.44]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.44]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.44]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.44]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.44]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.44]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.44]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.44]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/SecurityConfigurationValidatorTests.cs(240,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(String weakSecret)
[xUnit.net 00:00:00.44]            at InvokeStub_SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(Object, Span`1)
[xUnit.net 00:00:00.44]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
[xUnit.net 00:00:00.44]     Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(weakSecret: "password12345678901234567890") [FAIL]
[xUnit.net 00:00:00.44]       Expected result.IsValid to be True, but found False.
[xUnit.net 00:00:00.44]       Stack Trace:
[xUnit.net 00:00:00.44]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.44]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.44]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.44]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.44]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.44]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.44]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.44]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/SecurityConfigurationValidatorTests.cs(240,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(String weakSecret)
[xUnit.net 00:00:00.44]            at InvokeStub_SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(Object, Span`1)
[xUnit.net 00:00:00.44]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithShortJwtSecret_ReturnsError [73 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithMissingJwtSecret_ReturnsError [1 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(weakSecret: "admin1234567890123456789012") [80 ms]
  Error Message:
   Expected result.IsValid to be True, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(String weakSecret) in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/SecurityConfigurationValidatorTests.cs:line 240
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(weakSecret: "secret1234567890123456789012") [1 ms]
  Error Message:
   Expected result.IsValid to be True, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(String weakSecret) in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/SecurityConfigurationValidatorTests.cs:line 240
   at InvokeStub_SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(weakSecret: "test12345678901234567890123") [< 1 ms]
  Error Message:
   Expected result.IsValid to be True, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(String weakSecret) in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/SecurityConfigurationValidatorTests.cs:line 240
   at InvokeStub_SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(weakSecret: "password12345678901234567890") [< 1 ms]
  Error Message:
   Expected result.IsValid to be True, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(String weakSecret) in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/SecurityConfigurationValidatorTests.cs:line 240
   at InvokeStub_SecurityConfigurationValidatorTests.Validate_WithCommonWeakSecrets_ReturnsWarning(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithMultipleErrors_ReturnsAllErrors [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithDefaultSecretInProduction_ReturnsError [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithDefaultSecretInDevelopment_ReturnsWarning [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithValidConfiguration_ReturnsSuccess [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithNoRateLimitingInProduction_ReturnsWarning [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithWeakJwtSecret_ReturnsWarning [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.SecurityConfigurationValidatorTests.Validate_WithWildcardCorsInProduction_ReturnsError [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CohereChatClientTests.GetResponseAsync_ValidResponse_ReturnsCompletion [76 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisQuotaTrackerTests.CheckHierarchicalQuotaAsync_WithinAllLimits_ReturnsTrue [125 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisQuotaTrackerTests.CheckQuotaAsync_WithinLimits_ReturnsTrue [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisQuotaTrackerTests.CheckHierarchicalQuotaAsync_OnRedisError_ReturnsTrueAsFailsafe [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisQuotaTrackerTests.CheckHierarchicalQuotaAsync_UsesCorrectKeyStructure [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisQuotaTrackerTests.CheckQuotaAsync_ExceedsLimit_ReturnsFalse [9 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisQuotaTrackerTests.CheckQuotaAsync_OnRedisError_ReturnsTrueAsFailsafe [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisQuotaTrackerTests.RecordUsageAsync_SetsExpiration [28 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisQuotaTrackerTests.CheckQuotaAsync_WithNonExistentProvider_ReturnsTrue [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisQuotaTrackerTests.RecordUsageAsync_IncrementsTokenCounters [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisQuotaTrackerTests.CheckQuotaAsync_WithNoRateLimits_ReturnsTrue [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisQuotaTrackerTests.CheckHierarchicalQuotaAsync_ExceedsAnyLimit_ReturnsFalse [1 ms]
[xUnit.net 00:00:01.27]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChanges_WithDeletedEntity_ShouldConvertToSoftDelete [FAIL]
[xUnit.net 00:00:01.27]       Expected deletedOrg not to be <null>.
[xUnit.net 00:00:01.27]       Stack Trace:
[xUnit.net 00:00:01.27]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.27]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.27]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.27]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.27]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.27]            at FluentAssertions.Execution.AssertionScope.FailWith(String message)
[xUnit.net 00:00:01.27]            at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.27]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(695,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChanges_WithDeletedEntity_ShouldConvertToSoftDelete()
[xUnit.net 00:00:01.27]            at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
[xUnit.net 00:00:01.27]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.AntigravityChatClientTests.GetResponseAsync_SendsCorrectRequest_ReturnsResponse [34 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.AntigravityChatClientTests.GetStreamingResponseAsync_ParsesSSE_YieldsUpdates [11 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AuditServiceTests.Constructor_WithNullDbContext_ThrowsArgumentNullException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.SynaxisDbContextTests.Should_Create_Provider_In_Platform_Schema [572 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AuditServiceTests.LogAsync_WithNullPayload_SetsPayloadJsonToNull [515 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChanges_WithDeletedEntity_ShouldConvertToSoftDelete [1 s]
  Error Message:
   Expected deletedOrg not to be <null>.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message)
   at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChanges_WithDeletedEntity_ShouldConvertToSoftDelete() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 695
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AuditServiceTests.LogAsync_WithNullUserId_SetsUserIdToNull [9 ms]
[xUnit.net 00:00:01.30]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithNonSoftDeletableEntity_ShouldHardDelete [FAIL]
[xUnit.net 00:00:01.30]       Expected deletedOrg not to be <null>.
[xUnit.net 00:00:01.30]       Stack Trace:
[xUnit.net 00:00:01.30]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.30]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.30]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.30]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.30]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.30]            at FluentAssertions.Execution.AssertionScope.FailWith(String message)
[xUnit.net 00:00:01.30]            at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.30]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(277,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithNonSoftDeletableEntity_ShouldHardDelete()
[xUnit.net 00:00:01.30]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.34]     Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_RegistersDbContext_WithInMemoryDatabase_WhenUseInMemoryTrue [FAIL]
[xUnit.net 00:00:01.34]       System.InvalidOperationException : No service for type 'Microsoft.Extensions.Logging.ILogger`1[Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneDbContext]' has been registered.
[xUnit.net 00:00:01.34]       Stack Trace:
[xUnit.net 00:00:01.34]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:01.34]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:01.34]         /home/rrj/src/github/rudironsoni/Synaxis/src/InferenceGateway/Infrastructure/ControlPlane/ControlPlaneExtensions.cs(29,0): at Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneExtensions.<>c.<AddControlPlane>b__0_0(IServiceProvider sp, DbContextOptionsBuilder builder)
[xUnit.net 00:00:01.34]            at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
[xUnit.net 00:00:01.34]            at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
[xUnit.net 00:00:01.34]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
[xUnit.net 00:00:01.34]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:01.34]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
[xUnit.net 00:00:01.34]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
[xUnit.net 00:00:01.34]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:01.34]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:01.34]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/ControlPlane/ControlPlaneExtensionsTests.cs(27,0): at Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_RegistersDbContext_WithInMemoryDatabase_WhenUseInMemoryTrue()
[xUnit.net 00:00:01.34]            at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
[xUnit.net 00:00:01.34]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.35]     Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_RegistersIDeviationRegistry_AsScoped [FAIL]
[xUnit.net 00:00:01.35]       System.InvalidOperationException : No service for type 'Microsoft.Extensions.Logging.ILogger`1[Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneDbContext]' has been registered.
[xUnit.net 00:00:01.35]       Stack Trace:
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:01.35]         /home/rrj/src/github/rudironsoni/Synaxis/src/InferenceGateway/Infrastructure/ControlPlane/ControlPlaneExtensions.cs(29,0): at Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneExtensions.<>c.<AddControlPlane>b__0_0(IServiceProvider sp, DbContextOptionsBuilder builder)
[xUnit.net 00:00:01.35]            at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:01.35]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/ControlPlane/ControlPlaneExtensionsTests.cs(70,0): at Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_RegistersIDeviationRegistry_AsScoped()
[xUnit.net 00:00:01.35]            at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
[xUnit.net 00:00:01.35]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AuditServiceTests.LogAsync_SetsCorrectProperties [11 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AuditServiceTests.LogAsync_AddsAuditLogToDbContext [1 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithNonSoftDeletableEntity_ShouldHardDelete [26 ms]
  Error Message:
   Expected deletedOrg not to be <null>.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message)
   at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithNonSoftDeletableEntity_ShouldHardDelete() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 277
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.SynaxisDbContextTests.Should_Create_User_And_Organization_Membership [215 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_RegistersDbContext_WithInMemoryDatabase_WhenUseInMemoryTrue [14 ms]
  Error Message:
   System.InvalidOperationException : No service for type 'Microsoft.Extensions.Logging.ILogger`1[Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneDbContext]' has been registered.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneExtensions.<>c.<AddControlPlane>b__0_0(IServiceProvider sp, DbContextOptionsBuilder builder) in /home/rrj/src/github/rudironsoni/Synaxis/src/InferenceGateway/Infrastructure/ControlPlane/ControlPlaneExtensions.cs:line 29
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_RegistersDbContext_WithInMemoryDatabase_WhenUseInMemoryTrue() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/ControlPlane/ControlPlaneExtensionsTests.cs:line 27
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.External.DuckDuckGo.DuckDuckGoChatClientTests.EnsureTokenIsRetrievedAndUsed_OnPost [35 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_RegistersIDeviationRegistry_AsScoped [5 ms]
  Error Message:
   System.InvalidOperationException : No service for type 'Microsoft.Extensions.Logging.ILogger`1[Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneDbContext]' has been registered.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneExtensions.<>c.<AddControlPlane>b__0_0(IServiceProvider sp, DbContextOptionsBuilder builder) in /home/rrj/src/github/rudironsoni/Synaxis/src/InferenceGateway/Infrastructure/ControlPlane/ControlPlaneExtensions.cs:line 29
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_RegistersIDeviationRegistry_AsScoped() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/ControlPlane/ControlPlaneExtensionsTests.cs:line 70
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.35]     Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_UsesInMemory_WhenConnectionStringIsEmpty [FAIL]
[xUnit.net 00:00:01.35]       System.InvalidOperationException : No service for type 'Microsoft.Extensions.Logging.ILogger`1[Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneDbContext]' has been registered.
[xUnit.net 00:00:01.35]       Stack Trace:
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:01.35]         /home/rrj/src/github/rudironsoni/Synaxis/src/InferenceGateway/Infrastructure/ControlPlane/ControlPlaneExtensions.cs(29,0): at Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneExtensions.<>c.<AddControlPlane>b__0_0(IServiceProvider sp, DbContextOptionsBuilder builder)
[xUnit.net 00:00:01.35]            at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:01.35]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/ControlPlane/ControlPlaneExtensionsTests.cs(94,0): at Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_UsesInMemory_WhenConnectionStringIsEmpty()
[xUnit.net 00:00:01.35]            at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
[xUnit.net 00:00:01.35]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.35]     Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_RegistersDbContext_WithPostgreSQL_WhenConnectionStringProvided [FAIL]
[xUnit.net 00:00:01.35]       System.InvalidOperationException : No service for type 'Microsoft.Extensions.Logging.ILogger`1[Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneDbContext]' has been registered.
[xUnit.net 00:00:01.35]       Stack Trace:
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:01.35]         /home/rrj/src/github/rudironsoni/Synaxis/src/InferenceGateway/Infrastructure/ControlPlane/ControlPlaneExtensions.cs(29,0): at Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneExtensions.<>c.<AddControlPlane>b__0_0(IServiceProvider sp, DbContextOptionsBuilder builder)
[xUnit.net 00:00:01.35]            at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:01.35]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:01.35]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/ControlPlane/ControlPlaneExtensionsTests.cs(49,0): at Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_RegistersDbContext_WithPostgreSQL_WhenConnectionStringProvided()
[xUnit.net 00:00:01.35]            at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
[xUnit.net 00:00:01.35]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_UsesInMemory_WhenConnectionStringIsEmpty [2 ms]
  Error Message:
   System.InvalidOperationException : No service for type 'Microsoft.Extensions.Logging.ILogger`1[Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneDbContext]' has been registered.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneExtensions.<>c.<AddControlPlane>b__0_0(IServiceProvider sp, DbContextOptionsBuilder builder) in /home/rrj/src/github/rudironsoni/Synaxis/src/InferenceGateway/Infrastructure/ControlPlane/ControlPlaneExtensions.cs:line 29
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_UsesInMemory_WhenConnectionStringIsEmpty() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/ControlPlane/ControlPlaneExtensionsTests.cs:line 94
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_RegistersDbContext_WithPostgreSQL_WhenConnectionStringProvided [< 1 ms]
  Error Message:
   System.InvalidOperationException : No service for type 'Microsoft.Extensions.Logging.ILogger`1[Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneDbContext]' has been registered.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Synaxis.InferenceGateway.Infrastructure.ControlPlane.ControlPlaneExtensions.<>c.<AddControlPlane>b__0_0(IServiceProvider sp, DbContextOptionsBuilder builder) in /home/rrj/src/github/rudironsoni/Synaxis/src/InferenceGateway/Infrastructure/ControlPlane/ControlPlaneExtensions.cs:line 29
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneExtensionsTests.AddControlPlane_RegistersDbContext_WithPostgreSQL_WhenConnectionStringProvided() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/ControlPlane/ControlPlaneExtensionsTests.cs:line 49
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.External.DuckDuckGo.DuckDuckGoChatClientTests.ReturnsEmptyResponse_OnNonSuccess [13 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.IdentityManagerTests.DeleteAccountAsync_Existing_DeletesSuccessfully [18 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.IdentityManagerTests.GetAccountAsync_ExistingAccount_ReturnsAccount [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.External.KiloCode.KiloCodeChatClientTests.Constructor_DoesNotThrow_AndSetsBaseAddress_AndHeaders [17 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.SynaxisDbContextTests.Should_Create_Group_Hierarchy [89 ms]
[xUnit.net 00:00:01.40]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedGroup_ShouldConvertToSoftDelete [FAIL]
[xUnit.net 00:00:01.40]       Expected deletedGroup not to be <null>.
[xUnit.net 00:00:01.40]       Stack Trace:
[xUnit.net 00:00:01.40]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.40]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.40]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.40]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.40]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.40]            at FluentAssertions.Execution.AssertionScope.FailWith(String message)
[xUnit.net 00:00:01.40]            at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.41]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(137,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedGroup_ShouldConvertToSoftDelete()
[xUnit.net 00:00:01.41]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.44]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldSetRevokedByForApiKeys [FAIL]
[xUnit.net 00:00:01.44]       Expected revokedKey.RevokedBy to be {a0c749b2-8580-4807-9f9e-5bca15050511}, but found <null>.
[xUnit.net 00:00:01.44]       Stack Trace:
[xUnit.net 00:00:01.44]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.44]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.44]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.44]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.44]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.44]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.44]            at FluentAssertions.Primitives.NullableGuidAssertions`1.Be(Nullable`1 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.44]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(431,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldSetRevokedByForApiKeys()
[xUnit.net 00:00:01.44]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.47]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldCascadeRevokeApiKeys [FAIL]
[xUnit.net 00:00:01.47]       Expected revokedKeys to contain only items matching Not(k.IsActive), but 
[xUnit.net 00:00:01.47]       {
[xUnit.net 00:00:01.47]           Synaxis.InferenceGateway.Infrastructure.ControlPlane.Entities.Operations.ApiKey
[xUnit.net 00:00:01.47]           {
[xUnit.net 00:00:01.47]               CreatedAt = <2026-02-08 02:14:58.9230034>, 
[xUnit.net 00:00:01.47]               CreatedBy = <null>, 
[xUnit.net 00:00:01.47]               ExpiresAt = <null>, 
[xUnit.net 00:00:01.47]               Id = {5eb1220a-0956-400f-aeae-2749485595a5}, 
[xUnit.net 00:00:01.47]               IsActive = True, 
[xUnit.net 00:00:01.47]               KeyHash = "hash1", 
[xUnit.net 00:00:01.47]               KeyPrefix = "prefix1", 
[xUnit.net 00:00:01.47]               LastUsedAt = <null>, 
[xUnit.net 00:00:01.47]               Name = "API Key 1", 
[xUnit.net 00:00:01.47]               OrganizationId = {f444edbc-f8bf-497e-b61f-d30fd628cc77}, 
[xUnit.net 00:00:01.47]               RateLimitRpm = <null>, 
[xUnit.net 00:00:01.47]               RateLimitTpm = <null>, 
[xUnit.net 00:00:01.47]               RevocationReason = <null>, 
[xUnit.net 00:00:01.47]               RevokedAt = <null>, 
[xUnit.net 00:00:01.47]               RevokedBy = <null>, 
[xUnit.net 00:00:01.47]               Scopes = <null>
[xUnit.net 00:00:01.47]           }, 
[xUnit.net 00:00:01.47]           Synaxis.InferenceGateway.Infrastructure.ControlPlane.Entities.Operations.ApiKey
[xUnit.net 00:00:01.47]           {
[xUnit.net 00:00:01.47]               CreatedAt = <2026-02-08 02:14:58.9230049>, 
[xUnit.net 00:00:01.47]               CreatedBy = <null>, 
[xUnit.net 00:00:01.47]               ExpiresAt = <null>, 
[xUnit.net 00:00:01.47]               Id = {f91b9390-a105-4936-ad0b-49d44a49d6d6}, 
[xUnit.net 00:00:01.47]               IsActive = True, 
[xUnit.net 00:00:01.47]               KeyHash = "hash2", 
[xUnit.net 00:00:01.47]               KeyPrefix = "prefix2", 
[xUnit.net 00:00:01.47]               LastUsedAt = <null>, 
[xUnit.net 00:00:01.47]               Name = "API Key 2", 
[xUnit.net 00:00:01.47]               OrganizationId = {f444edbc-f8bf-497e-b61f-d30fd628cc77}, 
[xUnit.net 00:00:01.47]               RateLimitRpm = <null>, 
[xUnit.net 00:00:01.47]               RateLimitTpm = <null>, 
[xUnit.net 00:00:01.47]               RevocationReason = <null>, 
[xUnit.net 00:00:01.47]               RevokedAt = <null>, 
[xUnit.net 00:00:01.47]               RevokedBy = <null>, 
[xUnit.net 00:00:01.47]               Scopes = <null>
[xUnit.net 00:00:01.47]           }
[xUnit.net 00:00:01.48]       } do(es) not match.
[xUnit.net 00:00:01.48]       Stack Trace:
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.GivenSelector`1.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.GivenSelector`1.FailWith(String message, Func`2[] args)
[xUnit.net 00:00:01.48]            at FluentAssertions.Collections.GenericCollectionAssertions`3.OnlyContain(Expression`1 predicate, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.48]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(385,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldCascadeRevokeApiKeys()
[xUnit.net 00:00:01.48]         --- End of stack trace from previous location ---
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedGroup_ShouldConvertToSoftDelete [96 ms]
  Error Message:
   Expected deletedGroup not to be <null>.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message)
   at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedGroup_ShouldConvertToSoftDelete() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 137
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.Constructor_WithoutHttpContextAccessor_ShouldNotThrow [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.DeviationRegistryTests.RegisterAsync_PersistsDeviation [50 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.SynaxisDbContextTests.Should_Create_ApiKey [45 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldSetRevokedByForApiKeys [43 ms]
  Error Message:
   Expected revokedKey.RevokedBy to be {a0c749b2-8580-4807-9f9e-5bca15050511}, but found <null>.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.NullableGuidAssertions`1.Be(Nullable`1 expected, String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldSetRevokedByForApiKeys() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 431
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.DeviationRegistryTests.UpdateStatusAsync_UpdatesExistingDeviation [16 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldCascadeRevokeApiKeys [29 ms]
  Error Message:
   Expected revokedKeys to contain only items matching Not(k.IsActive), but 
{
    Synaxis.InferenceGateway.Infrastructure.ControlPlane.Entities.Operations.ApiKey
    {
        CreatedAt = <2026-02-08 02:14:58.9230034>, 
        CreatedBy = <null>, 
        ExpiresAt = <null>, 
        Id = {5eb1220a-0956-400f-aeae-2749485595a5}, 
        IsActive = True, 
        KeyHash = "hash1", 
        KeyPrefix = "prefix1", 
        LastUsedAt = <null>, 
        Name = "API Key 1", 
        OrganizationId = {f444edbc-f8bf-497e-b61f-d30fd628cc77}, 
        RateLimitRpm = <null>, 
        RateLimitTpm = <null>, 
        RevocationReason = <null>, 
        RevokedAt = <null>, 
        RevokedBy = <null>, 
        Scopes = <null>
    }, 
    Synaxis.InferenceGateway.Infrastructure.ControlPlane.Entities.Operations.ApiKey
    {
        CreatedAt = <2026-02-08 02:14:58.9230049>, 
        CreatedBy = <null>, 
        ExpiresAt = <null>, 
        Id = {f91b9390-a105-4936-ad0b-49d44a49d6d6}, 
        IsActive = True, 
        KeyHash = "hash2", 
        KeyPrefix = "prefix2", 
        LastUsedAt = <null>, 
        Name = "API Key 2", 
        OrganizationId = {f444edbc-f8bf-497e-b61f-d30fd628cc77}, 
        RateLimitRpm = <null>, 
        RateLimitTpm = <null>, 
        RevocationReason = <null>, 
        RevokedAt = <null>, 
        RevokedBy = <null>, 
        Scopes = <null>
    }
} do(es) not match.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Execution.GivenSelector`1.FailWith(String message, Object[] args)
   at FluentAssertions.Execution.GivenSelector`1.FailWith(String message, Func`2[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.OnlyContain(Expression`1 predicate, String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldCascadeRevokeApiKeys() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 385
--- End of stack trace from previous location ---
[xUnit.net 00:00:01.52]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithMultipleOrganizationsDeleted_ShouldHandleCascadeCorrectly [FAIL]
[xUnit.net 00:00:01.52]       Expected allGroups to contain 2 item(s), but found 0: {empty}.
[xUnit.net 00:00:01.52]       Stack Trace:
[xUnit.net 00:00:01.52]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.52]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.52]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.52]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.52]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.52]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.52]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.52]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(532,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithMultipleOrganizationsDeleted_ShouldHandleCascadeCorrectly()
[xUnit.net 00:00:01.52]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.54]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldConvertToSoftDelete [FAIL]
[xUnit.net 00:00:01.54]       Expected deletedOrg not to be <null>.
[xUnit.net 00:00:01.54]       Stack Trace:
[xUnit.net 00:00:01.54]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.54]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.54]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.54]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.54]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.54]            at FluentAssertions.Execution.AssertionScope.FailWith(String message)
[xUnit.net 00:00:01.54]            at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.54]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(96,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldConvertToSoftDelete()
[xUnit.net 00:00:01.54]         --- End of stack trace from previous location ---
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithMultipleOrganizationsDeleted_ShouldHandleCascadeCorrectly [42 ms]
  Error Message:
   Expected allGroups to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithMultipleOrganizationsDeleted_ShouldHandleCascadeCorrectly() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 532
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.IdentityManagerTests.RefreshTokenAsync_ExpiredToken_ThrowsException [143 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GitHubAuthStrategyTests.DeviceFlowCallback_EmitsAccountAuthenticatedAndWritesGhConfig [68 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.IdentityManagerTests.CompleteAuth_ValidProvider_ReturnsAuthResult [8 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.IdentityManagerTests.SaveAccountAsync_NewAccount_CreatesSuccessfully [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.IdentityManagerTests.StartAuth_FindsStrategyAndInitiatesFlow [6 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldConvertToSoftDelete [23 ms]
  Error Message:
   Expected deletedOrg not to be <null>.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message)
   at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldConvertToSoftDelete() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 96
--- End of stack trace from previous location ---
[xUnit.net 00:00:01.56]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithNestedEntities_ShouldOnlyCascadeFromOrganization [FAIL]
[xUnit.net 00:00:01.56]       Expected deletedGroup not to be <null>.
[xUnit.net 00:00:01.56]       Stack Trace:
[xUnit.net 00:00:01.56]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.56]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.56]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.56]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.56]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.56]            at FluentAssertions.Execution.AssertionScope.FailWith(String message)
[xUnit.net 00:00:01.56]            at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.56]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(575,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithNestedEntities_ShouldOnlyCascadeFromOrganization()
[xUnit.net 00:00:01.56]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.56]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithUnauthenticatedUser_ShouldNotSetDeletedBy [FAIL]
[xUnit.net 00:00:01.56]       Expected deletedOrg not to be <null>.
[xUnit.net 00:00:01.56]       Stack Trace:
[xUnit.net 00:00:01.56]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.56]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.56]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.56]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.56]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.56]            at FluentAssertions.Execution.AssertionScope.FailWith(String message)
[xUnit.net 00:00:01.56]            at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.56]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(205,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithUnauthenticatedUser_ShouldNotSetDeletedBy()
[xUnit.net 00:00:01.56]         --- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.SynaxisDbContextTests.Should_Create_Organization_With_Settings [104 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.IdentityManagerTests.RefreshTokenAsync_ValidToken_ReturnsNewToken [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.IdentityManagerTests.GetAccountAsync_NonExistent_ReturnsNull [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.IdentityManagerTests.GetToken_RefreshesIfExpired [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.IdentityManagerTests.GetToken_ReturnsAccessTokenIfExists [1 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithNestedEntities_ShouldOnlyCascadeFromOrganization [13 ms]
  Error Message:
   Expected deletedGroup not to be <null>.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message)
   at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithNestedEntities_ShouldOnlyCascadeFromOrganization() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 575
--- End of stack trace from previous location ---
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithUnauthenticatedUser_ShouldNotSetDeletedBy [5 ms]
  Error Message:
   Expected deletedOrg not to be <null>.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message)
   at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithUnauthenticatedUser_ShouldNotSetDeletedBy() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 205
--- End of stack trace from previous location ---
[xUnit.net 00:00:01.58]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldCascadeSoftDeleteGroups [FAIL]
[xUnit.net 00:00:01.58]       Expected deletedGroups to contain 2 item(s), but found 0: {empty}.
[xUnit.net 00:00:01.58]       Stack Trace:
[xUnit.net 00:00:01.58]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.58]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.58]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.58]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.58]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.58]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.58]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.58]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(332,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldCascadeSoftDeleteGroups()
[xUnit.net 00:00:01.58]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.59]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithAuthenticatedUser_ShouldSetDeletedBy [FAIL]
[xUnit.net 00:00:01.59]       Expected deletedOrg not to be <null>.
[xUnit.net 00:00:01.59]       Stack Trace:
[xUnit.net 00:00:01.59]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.59]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.59]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.59]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.59]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.59]            at FluentAssertions.Execution.AssertionScope.FailWith(String message)
[xUnit.net 00:00:01.59]            at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.59]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(173,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithAuthenticatedUser_ShouldSetDeletedBy()
[xUnit.net 00:00:01.59]         --- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.IdentityManagerTests.CompleteAuth_InvalidProvider_ThrowsException [10 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldCascadeSoftDeleteGroups [21 ms]
  Error Message:
   Expected deletedGroups to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldCascadeSoftDeleteGroups() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 332
--- End of stack trace from previous location ---
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithAuthenticatedUser_ShouldSetDeletedBy [6 ms]
  Error Message:
   Expected deletedOrg not to be <null>.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message)
   at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithAuthenticatedUser_ShouldSetDeletedBy() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 173
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.SynaxisDbContextTests.Should_Create_RoutingStrategy [55 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GitHubAuthStrategyTests.InitiateFlowAsync_GeneratesDeviceCodeAndStartsPolling [69 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GitHubAuthStrategyTests.InitiateFlowAsync_InvalidResponse_ReturnsError [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GitHubAuthStrategyTests.RefreshTokenAsync_NetworkFailure_Throws [8 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.Query_ShouldExcludeSoftDeletedEntitiesByDefault [25 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GitHubAuthStrategyTests.RefreshTokenAsync_RefreshesTokens [17 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.GenericOpenAiChatClientTests.Constructor_WithNullApiKey_ThrowsArgumentNullException [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.GenericOpenAiChatClientTests.Constructor_WithCustomHeaders_AddsHeadersToPipeline [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.GenericOpenAiChatClientTests.Metadata_ReturnsProviderMetadata [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.GenericOpenAiChatClientTests.GetService_CanRetrieveChatClient [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.GenericOpenAiChatClientTests.Constructor_SetsUpOpenAIClientWithCorrectParameters [< 1 ms]
[xUnit.net 00:00:01.65]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.Query_WithIgnoreQueryFilters_ShouldIncludeSoftDeletedEntities [FAIL]
[xUnit.net 00:00:01.65]       Expected allOrgs to contain 2 item(s), but found 1: 
[xUnit.net 00:00:01.65]       {
[xUnit.net 00:00:01.65]           Synaxis.InferenceGateway.Infrastructure.ControlPlane.Entities.Identity.Organization
[xUnit.net 00:00:01.65]           {
[xUnit.net 00:00:01.65]               BillingEmail = <null>, 
[xUnit.net 00:00:01.65]               CompanySize = <null>, 
[xUnit.net 00:00:01.65]               CreatedAt = <2026-02-08 02:14:59.1130706>, 
[xUnit.net 00:00:01.65]               CreatedBy = <null>, 
[xUnit.net 00:00:01.65]               DeletedAt = <null>, 
[xUnit.net 00:00:01.65]               DeletedBy = <null>, 
[xUnit.net 00:00:01.65]               DisplayName = "Active Org", 
[xUnit.net 00:00:01.65]               Groups = {empty}, 
[xUnit.net 00:00:01.65]               Id = {5f6ba0f0-76e1-4e3a-a9de-4bb38c99f235}, 
[xUnit.net 00:00:01.66]               Industry = <null>, 
[xUnit.net 00:00:01.66]               LegalAddress = <null>, 
[xUnit.net 00:00:01.66]               LegalName = "Active Org", 
[xUnit.net 00:00:01.66]               PhoneNumber = <null>, 
[xUnit.net 00:00:01.66]               PlanTier = "Free", 
[xUnit.net 00:00:01.66]               PrimaryContactEmail = <null>, 
[xUnit.net 00:00:01.66]               RegistrationNumber = <null>, 
[xUnit.net 00:00:01.66]               RequireMfa = False, 
[xUnit.net 00:00:01.66]               Roles = {empty}, 
[xUnit.net 00:00:01.66]               Settings = <null>, 
[xUnit.net 00:00:01.66]               Slug = "active-org", 
[xUnit.net 00:00:01.66]               Status = "Active", 
[xUnit.net 00:00:01.66]               SupportEmail = <null>, 
[xUnit.net 00:00:01.66]               TaxId = <null>, 
[xUnit.net 00:00:01.66]               TrialEndsAt = <null>, 
[xUnit.net 00:00:01.66]               UpdatedAt = <null>, 
[xUnit.net 00:00:01.66]               UpdatedBy = <null>, 
[xUnit.net 00:00:01.66]               UserMemberships = {empty}, 
[xUnit.net 00:00:01.66]               WebsiteUrl = <null>
[xUnit.net 00:00:01.66]           }
[xUnit.net 00:00:01.66]       }.
[xUnit.net 00:00:01.66]       Stack Trace:
[xUnit.net 00:00:01.66]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.66]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.66]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.66]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.66]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.66]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.66]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.66]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(660,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.Query_WithIgnoreQueryFilters_ShouldIncludeSoftDeletedEntities()
[xUnit.net 00:00:01.66]         --- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.GenericOpenAiChatClientTests.Constructor_WithEmptyCustomHeaders_HandlesGracefully [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.GenericOpenAiChatClientTests.Constructor_WithNullEndpoint_HandlesGracefully [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.GenericOpenAiChatClientTests.Constructor_WithNullCustomHeaders_HandlesGracefully [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.GenericOpenAiChatClientTests.Constructor_WithNullModelId_ThrowsArgumentNullException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.GenericOpenAiChatClientTests.GetService_WithServiceKey_ReturnsNullForUnknownKey [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.GenericOpenAiChatClientTests.Dispose_DisposesClient [< 1 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.Query_WithIgnoreQueryFilters_ShouldIncludeSoftDeletedEntities [20 ms]
  Error Message:
   Expected allOrgs to contain 2 item(s), but found 1: 
{
    Synaxis.InferenceGateway.Infrastructure.ControlPlane.Entities.Identity.Organization
    {
        BillingEmail = <null>, 
        CompanySize = <null>, 
        CreatedAt = <2026-02-08 02:14:59.1130706>, 
        CreatedBy = <null>, 
        DeletedAt = <null>, 
        DeletedBy = <null>, 
        DisplayName = "Active Org", 
        Groups = {empty}, 
        Id = {5f6ba0f0-76e1-4e3a-a9de-4bb38c99f235}, 
        Industry = <null>, 
        LegalAddress = <null>, 
        LegalName = "Active Org", 
        PhoneNumber = <null>, 
        PlanTier = "Free", 
        PrimaryContactEmail = <null>, 
        RegistrationNumber = <null>, 
        RequireMfa = False, 
        Roles = {empty}, 
        Settings = <null>, 
        Slug = "active-org", 
        Status = "Active", 
        SupportEmail = <null>, 
        TaxId = <null>, 
        TrialEndsAt = <null>, 
        UpdatedAt = <null>, 
        UpdatedBy = <null>, 
        UserMemberships = {empty}, 
        WebsiteUrl = <null>
    }
}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.Query_WithIgnoreQueryFilters_ShouldIncludeSoftDeletedEntities() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 660
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.Constructor_WithHttpContextAccessor_ShouldNotThrow [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithDeletedOrganization_ShouldNotRevokeAlreadyRevokedApiKeys [4 ms]
[xUnit.net 00:00:01.66]     Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithSubClaim_ShouldSetDeletedBy [FAIL]
[xUnit.net 00:00:01.66]       Expected deletedOrg not to be <null>.
[xUnit.net 00:00:01.66]       Stack Trace:
[xUnit.net 00:00:01.66]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.66]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.66]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.66]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.66]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.66]            at FluentAssertions.Execution.AssertionScope.FailWith(String message)
[xUnit.net 00:00:01.66]            at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.67]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs(240,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithSubClaim_ShouldSetDeletedBy()
[xUnit.net 00:00:01.67]         --- End of stack trace from previous location ---
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithSubClaim_ShouldSetDeletedBy [3 ms]
  Error Message:
   Expected deletedOrg not to be <null>.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message)
   at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Data.SoftDeleteInterceptorTests.SaveChangesAsync_WithSubClaim_ShouldSetDeletedBy() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Data/SoftDeleteInterceptorTests.cs:line 240
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.SynaxisDbContextTests.Should_Create_AuditLog [62 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckRateLimitAsync_WhenRedisThrows_ShouldFailOpen [7 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.GetCurrentUsageAsync_ShouldReturnCurrentValue [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckRateLimitAsync_ExceedsLimit_ShouldReturnDenied [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckRateLimitAsync_WithinLimit_ShouldReturnAllowed [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.GetCurrentUsageAsync_WithNonExistentKey_ShouldReturn0 [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckHierarchicalRateLimitAsync_GroupLimitExceeded_ShouldReturnDenied [8 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckHierarchicalRateLimitAsync_WithinAllLimits_ShouldReturnAllowed [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.IncrementTokenUsageAsync_WithNegativeTokenCount_ShouldThrowArgumentException [8 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.SynaxisDbContextTests.Should_Create_Model_With_Provider_Relationship [43 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.IncrementTokenUsageAsync_WithNullOrEmptyKey_ShouldThrowArgumentException [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckHierarchicalRateLimitAsync_UserLimitExceeded_ShouldReturnDenied [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckRateLimitAsync_WithNullOrEmptyKey_ShouldThrowArgumentException [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckRateLimitAsync_WithCustomIncrement_ShouldUseCorrectValue [8 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckHierarchicalRateLimitAsync_ShouldCheckAllLevelsInParallel [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckHierarchicalRateLimitAsync_WithNullConfig_ShouldThrowArgumentNullException [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.Constructor_WithNullLogger_ShouldThrowArgumentNullException [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckRateLimitAsync_ShouldExecuteLuaScriptAtomically [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.IncrementTokenUsageAsync_WhenRedisThrows_ShouldReturn0 [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckHierarchicalRateLimitAsync_OrganizationLimitExceeded_ShouldReturnDenied [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.ResetRateLimitAsync_WhenRedisThrows_ShouldReturnFalse [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.GetCurrentUsageAsync_WhenRedisThrows_ShouldReturn0 [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckHierarchicalRateLimitAsync_ShouldUseCorrectKeyStructure [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.Constructor_WithNullRedis_ShouldThrowArgumentNullException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.SynaxisDbContextTests.Should_Create_OrganizationProvider_Configuration [46 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.IncrementTokenUsageAsync_ShouldIncrementSuccessfully [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckHierarchicalRateLimitAsync_WithNoLimits_ShouldReturnAllowed [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.IncrementHierarchicalTokenUsageAsync_ShouldIncrementAllLevels [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.SynaxisDbContextTests.Should_Apply_Soft_Delete_Query_Filter_On_Users [10 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckHierarchicalRateLimitAsync_WithoutGroup_ShouldSkipGroupChecks [7 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.SynaxisDbContextTests.Should_Apply_Soft_Delete_Query_Filter_On_Organizations [9 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.ResetRateLimitAsync_ShouldDeleteKey [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.IncrementHierarchicalTokenUsageAsync_WithoutGroup_ShouldSkipGroupIncrement [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.IncrementTokenUsageAsync_ShouldExecuteLuaScript [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.CheckRateLimitAsync_WithZeroOrNegativeLimit_ShouldThrowArgumentException [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Routing.RedisRateLimitingServiceTests.ResetRateLimitAsync_WithNonExistentKey_ShouldReturnFalse [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.EncryptedFileTokenStoreTests.SaveAsync_CallsProtectAndWritesFile [15 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GhConfigWriterTests.WriteTokenAsync_AppendsBlock_WhenNoExistingGithubBlock [9 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.EncryptedFileTokenStoreTests.LoadAsync_CallsUnprotectAndReturnsAccounts [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.External.AiHorde.Tests.AiHordeChatClientTests.GetStreamingResponseAsync_YieldsFinal [233 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GhConfigWriterTests.WriteTokenAsync_HandlesSpecialCharactersInToken [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Auth.FileTokenStoreTests.LoadAsync_ReturnsEmptyList_OnException [19 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GhConfigWriterTests.WriteTokenAsync_OverwritesExistingGithubConfiguration [9 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Auth.FileTokenStoreTests.SaveAsync_CreatesDirectory_IfNotExists [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GhConfigWriterTests.WriteTokenAsync_WritesCustomUser_WhenUserSpecified [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Auth.FileTokenStoreTests.LoadAsync_LoadsAndDeserializesAccounts [8 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.SynaxisDbContextTests.Should_Create_ProviderHealthStatus [65 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GhConfigWriterTests.WriteTokenAsync_InitializesEmptyFile_WhenFileIsCorrupted [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Auth.FileTokenStoreTests.SaveAsync_And_LoadAsync_HandleEmptyList [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GhConfigWriterTests.WriteTokenAsync_ReplacesExistingGithubBlock [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Auth.FileTokenStoreTests.SaveAsync_WritesSerializedAccountsToFile [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Auth.FileTokenStoreTests.LoadAsync_ReturnsEmptyList_WhenFileDoesNotExist [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GhConfigWriterTests.WriteTokenAsync_CreatesDirectory_WhenNotExists [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GhConfigWriterTests.WriteTokenAsync_HandlesMixedLineEndings [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.AntigravityAuthManagerTests.ListAccounts_ReturnsLoadedAccounts [18 ms]
[xUnit.net 00:00:01.95]     Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.ConfigurationValidation_EnforcesConstraints [FAIL]
[xUnit.net 00:00:01.95]       Assert.Throws() Failure: Exception type was not an exact match
[xUnit.net 00:00:01.95]       Expected: typeof(Microsoft.EntityFrameworkCore.DbUpdateException)
[xUnit.net 00:00:01.95]       Actual:   typeof(System.InvalidOperationException)
[xUnit.net 00:00:01.95]       ---- System.InvalidOperationException : Unable to track an entity of type 'TokenOptimizationConfiguration' because its primary key property 'ProviderId' is null.
[xUnit.net 00:00:01.95]       Stack Trace:
[xUnit.net 00:00:01.95]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Optimization/Configuration/TokenOptimizationConfigurationResolverTests.cs(427,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.ConfigurationValidation_EnforcesConstraints()
[xUnit.net 00:00:01.95]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.95]         ----- Inner Stack Trace -----
[xUnit.net 00:00:01.95]            at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
[xUnit.net 00:00:01.95]            at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
[xUnit.net 00:00:01.95]            at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.OnStateChanging(EntityState newState)
[xUnit.net 00:00:01.95]            at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntryBase.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
[xUnit.net 00:00:01.95]            at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)
[xUnit.net 00:00:01.95]            at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)
[xUnit.net 00:00:01.95]            at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)
[xUnit.net 00:00:01.95]            at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)
[xUnit.net 00:00:01.95]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
[xUnit.net 00:00:01.95]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Optimization/Configuration/TokenOptimizationConfigurationResolverTests.cs(517,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolver.CreateConfigurationAsync(TokenOptimizationConfiguration configuration, CancellationToken cancellationToken)
[xUnit.net 00:00:01.95]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Optimization/Configuration/TokenOptimizationConfigurationResolverTests.cs(429,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.<>c__DisplayClass14_0.<<ConfigurationValidation_EnforcesConstraints>b__0>d.MoveNext()
[xUnit.net 00:00:01.95]         --- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_WithInvalidKey_ShouldReturnFailure [11 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GhConfigWriterTests.WriteTokenAsync_PreservesOtherHosts [10 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.AntigravityAuthManagerTests.GetTokenAsync_InjectsEnvVarToken [12 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.QueryPerformance_OptimizedForCommonPatterns [70 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.ConfigurationValidation_EnforcesConstraints [3 ms]
  Error Message:
   Assert.Throws() Failure: Exception type was not an exact match
Expected: typeof(Microsoft.EntityFrameworkCore.DbUpdateException)
Actual:   typeof(System.InvalidOperationException)
---- System.InvalidOperationException : Unable to track an entity of type 'TokenOptimizationConfiguration' because its primary key property 'ProviderId' is null.
  Stack Trace:
     at Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.ConfigurationValidation_EnforcesConstraints() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Optimization/Configuration/TokenOptimizationConfigurationResolverTests.cs:line 427
--- End of stack trace from previous location ---
----- Inner Stack Trace -----
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.OnStateChanging(EntityState newState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntryBase.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolver.CreateConfigurationAsync(TokenOptimizationConfiguration configuration, CancellationToken cancellationToken) in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Optimization/Configuration/TokenOptimizationConfigurationResolverTests.cs:line 517
   at Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.<>c__DisplayClass14_0.<<ConfigurationValidation_EnforcesConstraints>b__0>d.MoveNext() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Optimization/Configuration/TokenOptimizationConfigurationResolverTests.cs:line 429
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.CreateConfigurationAsync_NewProvider_CreatesSuccessfully [7 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.GetConfigurationAsync_ExistingProvider_ReturnsConfiguration [3 ms]
[xUnit.net 00:00:01.98]     Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.ConcurrentUpdates_HandledCorrectly [FAIL]
[xUnit.net 00:00:01.98]       Assert.Equal() Failure: Values differ
[xUnit.net 00:00:01.98]       Expected: 16000
[xUnit.net 00:00:01.98]       Actual:   4000
[xUnit.net 00:00:01.98]       Stack Trace:
[xUnit.net 00:00:01.98]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Optimization/Configuration/TokenOptimizationConfigurationResolverTests.cs(373,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.ConcurrentUpdates_HandledCorrectly()
[xUnit.net 00:00:01.98]         --- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.UpdateConfigurationAsync_ExistingProvider_UpdatesSuccessfully [9 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.ConcurrentUpdates_HandledCorrectly [2 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: 16000
Actual:   4000
  Stack Trace:
     at Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.ConcurrentUpdates_HandledCorrectly() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Optimization/Configuration/TokenOptimizationConfigurationResolverTests.cs:line 373
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.DeleteConfigurationAsync_ExistingProvider_DeletesSuccessfully [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.GetConfigurationsWithCachingEnabledAsync_FiltersCorrectly [7 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.GetAllConfigurationsAsync_MultipleProviders_ReturnsAll [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.GetConfigurationsByStrategyAsync_FiltersCorrectly [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.BulkOperations_PerformEfficiently [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Configuration.TokenOptimizationConfigurationResolverTests.GetConfigurationAsync_MissingProvider_ReturnsNull [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.GhConfigWriterTests.WriteTokenAsync_CreatesNewFile_WhenFileDoesNotExist [142 ms]
[xUnit.net 00:00:02.05]     Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WhenApiKeyServiceThrows_ShouldReturn500 [FAIL]
[xUnit.net 00:00:02.05]       Moq.MockException : 
[xUnit.net 00:00:02.05]       Expected invocation on the mock should never have been performed, but was 1 times: n => n(It.IsAny<HttpContext>())
[xUnit.net 00:00:02.05]       
[xUnit.net 00:00:02.05]       Performed invocations:
[xUnit.net 00:00:02.05]       
[xUnit.net 00:00:02.05]          Mock<RequestDelegate:1> (n):
[xUnit.net 00:00:02.05]       
[xUnit.net 00:00:02.05]             RequestDelegate.Invoke(DefaultHttpContext)
[xUnit.net 00:00:02.05]       
[xUnit.net 00:00:02.05]       Stack Trace:
[xUnit.net 00:00:02.05]         /_/src/Moq/Mock.cs(332,0): at Moq.Mock.Verify(Mock mock, LambdaExpression expression, Times times, String failMessage)
[xUnit.net 00:00:02.05]         /_/src/Moq/Mock`1.cs(840,0): at Moq.Mock`1.Verify[TResult](Expression`1 expression, Func`1 times)
[xUnit.net 00:00:02.05]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/TenantResolutionMiddlewareTests.cs(484,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WhenApiKeyServiceThrows_ShouldReturn500()
[xUnit.net 00:00:02.05]         --- End of stack trace from previous location ---
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WhenApiKeyServiceThrows_ShouldReturn500 [38 ms]
  Error Message:
   Moq.MockException : 
Expected invocation on the mock should never have been performed, but was 1 times: n => n(It.IsAny<HttpContext>())

Performed invocations:

   Mock<RequestDelegate:1> (n):

      RequestDelegate.Invoke(DefaultHttpContext)

  Stack Trace:
     at Moq.Mock.Verify(Mock mock, LambdaExpression expression, Times times, String failMessage) in /_/src/Moq/Mock.cs:line 332
   at Moq.Mock`1.Verify[TResult](Expression`1 expression, Func`1 times) in /_/src/Moq/Mock`1.cs:line 840
   at Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WhenApiKeyServiceThrows_ShouldReturn500() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/TenantResolutionMiddlewareTests.cs:line 484
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithBearerTokenWithExtraSpaces_ShouldTrim [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithValidJwt_ShouldAuthenticateSuccessfully [8 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.DecryptAsync_WithValidEncryptedData_ReturnsOriginalPlaintext [63 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.Encrypt_Decrypt_Roundtrip_WorksCorrectly [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.Constructor_WithEmptyMasterKey_ThrowsInvalidOperationException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithApiKeyPrefix_ShouldExtractCorrectly [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithEmptyAuthorizationHeader_ShouldCallNext [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithJwtAlternativeClaimNames_ShouldAuthenticate [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithBearerSchemeCaseInsensitive_ShouldParse [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithJwtMissingOrganizationId_ShouldReturn401 [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithRevokedApiKey_ShouldReturn401 [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithUnauthenticatedJwt_ShouldReturn401 [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.Constructor_WithNullNext_ShouldThrowArgumentNullException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WhenValidationReturnsNullApiKeyId_ShouldReturn500 [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithInvalidApiKey_ShouldReturn401 [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WhenValidationReturnsNullOrganizationId_ShouldReturn500 [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithJwtMissingUserId_ShouldReturn401 [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.Constructor_WithNullLogger_ShouldThrowArgumentNullException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithValidApiKey_ShouldAuthenticateSuccessfully [12 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithNonBearerScheme_ShouldReturn401 [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithNoAuthorizationHeader_ShouldCallNext [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithJwtInvalidOrganizationId_ShouldReturn401 [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.TenantResolutionMiddlewareTests.InvokeAsync_WithJwtWithoutScopes_ShouldSetEmptyScopes [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.RotateKeyAsync_WithValidTenant_UpdatesEncryptedTokens [60 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisSessionStoreTests.SessionExistsAsync_Existing_ReturnsTrue [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.RotateKeyAsync_WithInvalidKeyLength_ThrowsArgumentException [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.Constructor_WithNullConfig_ThrowsNullReferenceException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisSessionStoreTests.GetProviderAffinityAsync_Missing_ReturnsNull [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.DecryptAsync_WithInvalidCiphertext_ThrowsArgumentException [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.Constructor_WithWhitespaceMasterKey_ThrowsInvalidOperationException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.EncryptAsync_WithValidTenant_ReturnsEncryptedData [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisSessionStoreTests.ConcurrentAccess_HandlesSafely [9 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisSessionStoreTests.SetProviderAffinityAsync_StoresValue [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.EncryptAsync_WithNonExistentTenant_ThrowsArgumentException [10 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.Encrypt_Produces_Different_Output_For_Same_Input [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisSessionStoreTests.SessionExistsAsync_Missing_ReturnsFalse [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.RotateKeyAsync_WithNonExistentTenant_ThrowsArgumentException [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.DecryptAsync_WithNonExistentTenant_ThrowsArgumentException [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.Constructor_WithNullMasterKey_ThrowsInvalidOperationException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.AesGcmTokenVaultTests.Constructor_WithNullDbContext_DoesNotThrowException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.GetResponseAsync_MultipleMessages_HandlesAllMessageTypes [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.GetStreamingResponseAsync_ApiError_ThrowsHttpRequestException [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.GetService_ReturnsNull [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.GetStreamingResponseAsync_Success_YieldsMultipleUpdates [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.Constructor_SetsDefaultModelIdAndMetadata [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.GetResponseAsync_Success_ReturnsValidChatResponse [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.GetResponseAsync_WithOptions_IncludesOptionsInRequest [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.Constructor_WithCustomModelId_SetsModelId [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.GetResponseAsync_ApiError_ThrowsHttpRequestException [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.GetResponseAsync_EmptyResponse_HandlesGracefully [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.Dispose_DisposesHttpClient [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.GetStreamingResponseAsync_WithOptions_IncludesOptionsInRequest [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.Constructor_ModelMapping_Gpt4oMapsToOpenAiLarge [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.GetStreamingResponseAsync_EmptyResponse_HandlesGracefully [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.Constructor_ModelMapping_Gpt4oMiniMapsToOpenAi [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.Metadata_ReturnsCorrectProviderName [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.PollinationsChatClientTests.Constructor_ModelMapping_UnknownModelRemainsSame [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.JwtServiceTests.GenerateToken_WithWhitespaceJwtSecret_ThrowsInvalidOperationException [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisSessionStoreTests.GetActiveSessionsAsync_ReturnsList [47 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisSessionStoreTests.RedisFailure_FailsOpen_ReturnsNull [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisSessionStoreTests.GetLastActivityAsync_Existing_ReturnsTimestamp [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisSessionStoreTests.UpdateLastActivityAsync_UpdatesTimestamp [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisSessionStoreTests.GetProviderAffinityAsync_Existing_ReturnsValue [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.JwtServiceTests.GenerateToken_UsesConfiguredIssuerAndAudience [28 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisConversationStoreTests.GetCompressedForProviderAsync_AppliesStrategy [11 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisConversationStoreTests.AppendMessageAsync_AddsToList [7 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisConversationStoreTests.GetFullHistoryAsync_Existing_ReturnsMessages [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.JwtServiceTests.GenerateToken_WithValidUser_ReturnsValidJwtToken [15 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.JwtServiceTests.GenerateToken_WithEmptyJwtSecret_ThrowsInvalidOperationException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.JwtServiceTests.GenerateToken_WithNullJwtSecret_ThrowsInvalidOperationException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.JwtServiceTests.GenerateToken_WithNullIssuerAndAudience_UsesDefaults [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.JwtServiceTests.GenerateToken_TokenExpiresInSevenDays [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.JwtServiceTests.Constructor_WithNullConfig_ThrowsArgumentNullException [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisConversationStoreTests.ClearSessionAsync_RemovesAllData [10 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisConversationStoreTests.RedisFailure_FailsOpen_ReturnsEmpty [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisConversationStoreTests.GetFullHistoryAsync_Missing_ReturnsEmpty [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisConversationStoreTests.MessageSerialization_RoundTripsCorrectly [6 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisConversationStoreTests.LargeConversation_HandlesEfficiently [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneStoreTests.GetGlobalModelAsync_ReturnsModelWithProviderModels_WhenExists [88 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneStoreTests.GetAliasAsync_UsesNoTracking_Performance [17 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneStoreTests.GetGlobalModelAsync_ReturnsNull_WhenNotFound [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneStoreTests.GetAliasAsync_ReturnsAlias_WhenExists [2 ms]
[xUnit.net 00:00:02.41]     Synaxis.InferenceGateway.Infrastructure.Tests.External.GitHub.CopilotSdkClientTests.Dispose_DisposesAdapter [FAIL]
[xUnit.net 00:00:02.41]       Moq.MockException : 
[xUnit.net 00:00:02.41]       Expected invocation on the mock once, but was 0 times: a => a.Dispose()
[xUnit.net 00:00:02.41]       
[xUnit.net 00:00:02.41]       Performed invocations:
[xUnit.net 00:00:02.41]       
[xUnit.net 00:00:02.41]          Mock<ICopilotSdkAdapter:2> (a):
[xUnit.net 00:00:02.41]          No invocations performed.
[xUnit.net 00:00:02.41]       
[xUnit.net 00:00:02.41]       Stack Trace:
[xUnit.net 00:00:02.41]         /_/src/Moq/Mock.cs(332,0): at Moq.Mock.Verify(Mock mock, LambdaExpression expression, Times times, String failMessage)
[xUnit.net 00:00:02.41]         /_/src/Moq/Mock`1.cs(727,0): at Moq.Mock`1.Verify(Expression`1 expression, Times times)
[xUnit.net 00:00:02.41]         /_/src/Moq/Mock`1.cs(741,0): at Moq.Mock`1.Verify(Expression`1 expression, Func`1 times)
[xUnit.net 00:00:02.41]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/External/GitHub/CopilotSdkClientTests.cs(66,0): at Synaxis.InferenceGateway.Infrastructure.Tests.External.GitHub.CopilotSdkClientTests.Dispose_DisposesAdapter()
[xUnit.net 00:00:02.41]            at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
[xUnit.net 00:00:02.41]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.DeviceFlowServiceTests.StartPollingAsync_ReceivesToken_AndCallsOnSuccess [105 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneStoreTests.GetComboAsync_ReturnsCombo_WhenExists [18 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneStoreTests.GetAliasAsync_ReturnsNull_WhenNotFound [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneStoreTests.GetGlobalModelAsync_IncludesRelatedEntities [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.ControlPlane.ControlPlaneStoreTests.GetComboAsync_ReturnsNull_WhenNotFound [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.External.GitHub.CopilotSdkClientTests.GetResponseAsync_DelegatesToAdapter [5 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.External.GitHub.CopilotSdkClientTests.Dispose_DisposesAdapter [1 ms]
  Error Message:
   Moq.MockException : 
Expected invocation on the mock once, but was 0 times: a => a.Dispose()

Performed invocations:

   Mock<ICopilotSdkAdapter:2> (a):
   No invocations performed.

  Stack Trace:
     at Moq.Mock.Verify(Mock mock, LambdaExpression expression, Times times, String failMessage) in /_/src/Moq/Mock.cs:line 332
   at Moq.Mock`1.Verify(Expression`1 expression, Times times) in /_/src/Moq/Mock`1.cs:line 727
   at Moq.Mock`1.Verify(Expression`1 expression, Func`1 times) in /_/src/Moq/Mock`1.cs:line 741
   at Synaxis.InferenceGateway.Infrastructure.Tests.External.GitHub.CopilotSdkClientTests.Dispose_DisposesAdapter() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/External/GitHub/CopilotSdkClientTests.cs:line 66
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.External.GitHub.CopilotSdkClientTests.GetStreamingResponseAsync_StreamsFromAdapter [12 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.Google.GoogleAuthStrategyTests.CompleteFlowAsync_InvalidTokenResponse_HandlesError [12 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.Google.GoogleAuthStrategyTests.RefreshTokenAsync_RefreshesTokens [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.Google.GoogleAuthStrategyTests.FetchUserEmailAsync_InvalidResponse_ReturnsEmptyString [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.Google.GoogleAuthStrategyTests.InitiateFlowAsync_GeneratesAuthorizationUrlWithPkce [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.Google.GoogleAuthStrategyTests.RefreshTokenAsync_NetworkFailure_ThrowsInvalidOperationException [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.Google.GoogleAuthStrategyTests.CompleteFlowAsync_ExchangesCode_FetchesUserInfo_EmitsEvent [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.External.GitHub.GitHubCopilotChatClientTests.GetStreamingResponseAsync_StreamsUpdates [17 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.External.GitHub.GitHubCopilotChatClientTests.Dispose_DisposesClient [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.External.GitHub.GitHubCopilotChatClientTests.GetResponseAsync_CreatesSessionSendsAndReturnsResponse [5 ms]
CloudflareChatClient sending request. Url: https://api.cloudflare.com/client/v4/accounts/test-account-id/ai/run/@cf/meta/llama-3.1-8b-instruct ModelId: @cf/meta/llama-3.1-8b-instruct
CloudflareChatClient sending request. Url: https://api.cloudflare.com/client/v4/accounts/test-account-id/ai/run/@cf/meta/llama-3.1-8b-instruct ModelId: @cf/meta/llama-3.1-8b-instruct
CloudflareChatClient sending request. Url: https://api.cloudflare.com/client/v4/accounts/test-account-id/ai/run/@cf/meta/llama-3.1-8b-instruct ModelId: @cf/meta/llama-3.1-8b-instruct
CloudflareChatClient sending request. Url: https://api.cloudflare.com/client/v4/accounts/test-account-id/ai/run/@cf/meta/llama-3.1-8b-instruct ModelId: @cf/meta/llama-3.1-8b-instruct
CloudflareChatClient sending request. Url: https://api.cloudflare.com/client/v4/accounts/test-account-id/ai/run/@cf/meta/llama-3.1-8b-instruct ModelId: @cf/meta/llama-3.1-8b-instruct
  Passed Synaxis.InferenceGateway.Infrastructure.External.AiHorde.Tests.AiHordeChatClientTests.GetResponseAsync_ReturnsFinalText [685 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.GetResponseAsync_ApiError_ThrowsHttpRequestException [5 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.Constructor_SetsAuthorizationHeaderAndMetadata [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.GetResponseAsync_EmptyResponse_HandlesGracefully [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.GetResponseAsync_WithOptions_IncludesOptionsInRequest [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.GetStreamingResponseAsync_InvalidJson_SkipsInvalidLines [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.Constructor_WithoutLogger_HandlesNullLogger [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.GetStreamingResponseAsync_NonDataLines_SkipsNonDataLines [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.Metadata_ReturnsCorrectProviderName [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.GetResponseAsync_Success_ReturnsValidChatResponse [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.GetStreamingResponseAsync_Success_YieldsMultipleUpdates [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.GetService_ReturnsNull [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.GetStreamingResponseAsync_EmptyLines_SkipsEmptyLines [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.GetResponseAsync_MultipleMessages_HandlesAllMessageTypes [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.Dispose_DisposesHttpClient [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.CloudflareChatClientTests.Constructor_WithLogger_SetsLogger [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.SynaxisUserStoreTests.FindByEmailInOrganizationAsync_WithValidData_ReturnsUser [28 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.SynaxisUserStoreTests.FindByIdAsync_WithDeletedUser_ReturnsNull [14 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.SynaxisUserStoreTests.FindByEmailInOrganizationAsync_WithDeletedUser_ReturnsNull [1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.SynaxisUserStoreTests.GetOrganizationsAsync_ReturnsUserOrganizations [27 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisInFlightDeduplicationTests.ExecuteWithDeduplication_ConcurrentCalls_Deduplicates [213 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisInFlightDeduplicationTests.ExecuteWithDeduplication_Success_StoresResult [21 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisInFlightDeduplicationTests.ExecuteWithDeduplication_FirstCall_AcquiresLock [24 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisInFlightDeduplicationTests.IsInFlightAsync_Locked_ReturnsTrue [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisInFlightDeduplicationTests.RedisFailure_FailsOpen_ExecutesDirectly [14 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisInFlightDeduplicationTests.ExecuteWithDeduplication_Exception_Propagates [4 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisInFlightDeduplicationTests.ExecuteWithDeduplication_Failure_ReleasesLock [19 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisInFlightDeduplicationTests.ExecuteWithDeduplication_LockTimeout_ExecutesFallback [116 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Optimization.Caching.RedisInFlightDeduplicationTests.IsInFlightAsync_Unlocked_ReturnsFalse [3 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ListApiKeysAsync_ShouldReturnAllActiveKeys [1 s]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.RevokeApiKeyAsync_WithAlreadyRevokedKey_ShouldReturnFalse [303 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.GenerateApiKeyAsync_ShouldSetRateLimits [292 ms]
[xUnit.net 00:00:04.90]     Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_WithRevokedKey_ShouldReturnFailure [FAIL]
[xUnit.net 00:00:04.90]       Expected result.ErrorMessage "API key has been deactivated." to contain "revoked".
[xUnit.net 00:00:04.90]       Stack Trace:
[xUnit.net 00:00:04.90]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:04.90]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:04.90]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:04.90]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:04.90]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:04.90]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:04.90]            at FluentAssertions.Primitives.StringAssertions`1.Contain(String expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:04.90]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/ApiKeyServiceTests.cs(265,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_WithRevokedKey_ShouldReturnFailure()
[xUnit.net 00:00:04.90]         --- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_WithExpiredKey_ShouldReturnFailure [578 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_WithRevokedKey_ShouldReturnFailure [583 ms]
  Error Message:
   Expected result.ErrorMessage "API key has been deactivated." to contain "revoked".
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.StringAssertions`1.Contain(String expected, String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_WithRevokedKey_ShouldReturnFailure() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/ApiKeyServiceTests.cs:line 265
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ListApiKeysAsync_WithIncludeRevoked_ShouldReturnAllKeys [588 ms]
[xUnit.net 00:00:06.66]     Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_WithInactiveKey_ShouldReturnFailure [FAIL]
[xUnit.net 00:00:06.66]       Expected result.ErrorMessage "API key has been deactivated." to contain "inactive".
[xUnit.net 00:00:06.66]       Stack Trace:
[xUnit.net 00:00:06.66]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:06.66]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:06.66]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:06.66]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:06.66]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:06.66]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:06.66]            at FluentAssertions.Primitives.StringAssertions`1.Contain(String expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:06.66]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/ApiKeyServiceTests.cs(311,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_WithInactiveKey_ShouldReturnFailure()
[xUnit.net 00:00:06.66]         --- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_WithValidKey_ShouldReturnSuccess [601 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_WithInactiveKey_ShouldReturnFailure [576 ms]
  Error Message:
   Expected result.ErrorMessage "API key has been deactivated." to contain "inactive".
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.StringAssertions`1.Contain(String expected, String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_WithInactiveKey_ShouldReturnFailure() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/ApiKeyServiceTests.cs:line 311
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ListApiKeysAsync_ShouldExcludeRevokedKeysByDefault [581 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.GenerateApiKeyAsync_ShouldStoreKeyPrefixCorrectly [291 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.RevokeApiKeyAsync_WithNonExistentKey_ShouldReturnFalse [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.GenerateApiKeyAsync_ShouldSetExpirationDate [290 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.GenerateApiKeyAsync_ShouldGenerateUniqueKeys [568 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_WithInvalidPrefix_ShouldReturnFailure [< 1 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_ShouldUseConstantTimeBcryptComparison [287 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.GenerateApiKeyAsync_ShouldSetIsActiveToTrue [287 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.UpdateLastUsedAsync_ShouldUpdateTimestamp [396 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.GenerateApiKeyAsync_ShouldStoreBcryptHashedKey [354 ms]
[xUnit.net 00:00:10.63]     Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ListApiKeysAsync_ShouldNotReturnHashedKey [FAIL]
[xUnit.net 00:00:10.63]       Expected keys.First().Prefix to start with "synaxis_build_", but "synaxis_rj1mXQAA" differs near "rj1" (index 8).
[xUnit.net 00:00:10.63]       Stack Trace:
[xUnit.net 00:00:10.63]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:10.63]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:10.63]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:10.63]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:10.63]            at FluentAssertions.Primitives.StringStartValidator.ValidateAgainstMismatch()
[xUnit.net 00:00:10.63]            at FluentAssertions.Primitives.StringValidator.Validate()
[xUnit.net 00:00:10.63]            at FluentAssertions.Primitives.StringAssertions`1.StartWith(String expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:10.63]         /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/ApiKeyServiceTests.cs(578,0): at Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ListApiKeysAsync_ShouldNotReturnHashedKey()
[xUnit.net 00:00:10.63]         --- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ValidateApiKeyAsync_ShouldReturnRateLimits [584 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.DeviceFlowServiceTests.StartPollingAsync_HandlesSlowDown [8 s]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.DeviceFlowServiceTests.StartPollingAsync_HandlesInvalidJson [118 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.DeviceFlowServiceTests.StartPollingAsync_HandlesNetworkError [102 ms]
  Failed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ListApiKeysAsync_ShouldNotReturnHashedKey [311 ms]
  Error Message:
   Expected keys.First().Prefix to start with "synaxis_build_", but "synaxis_rj1mXQAA" differs near "rj1" (index 8).
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.StringStartValidator.ValidateAgainstMismatch()
   at FluentAssertions.Primitives.StringValidator.Validate()
   at FluentAssertions.Primitives.StringAssertions`1.StartWith(String expected, String because, Object[] becauseArgs)
   at Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.ListApiKeysAsync_ShouldNotReturnHashedKey() in /home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Security/ApiKeyServiceTests.cs:line 578
--- End of stack trace from previous location ---
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.DeviceFlowServiceTests.StartPollingAsync_HandlesExpiredToken [100 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.DeviceFlowServiceTests.StartPollingAsync_HandlesAccessDenied [100 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.RevokeApiKeyAsync_WithValidKey_ShouldRevokeSuccessfully [295 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.GenerateApiKeyAsync_ShouldGenerateValidKeyFormat [296 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.UpdateLastUsedAsync_WithNonExistentKey_ShouldNotThrow [2 ms]
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Security.ApiKeyServiceTests.RevokeApiKeyAsync_WithoutRevokedBy_ShouldStillRevoke [288 ms]
[xUnit.net 00:00:13.33]   Finished:    Synaxis.InferenceGateway.Infrastructure.Tests
  Passed Synaxis.InferenceGateway.Infrastructure.Tests.Identity.Strategies.GitHub.DeviceFlowServiceTests.StartPollingAsync_HandlesAuthorizationPending [2 s]

Test Run Failed.
Total tests: 321
     Passed: 293
     Failed: 28
 Total time: 13.7855 Seconds
     1>Project "/home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Synaxis.InferenceGateway.Infrastructure.Tests.csproj" on node 1 (VSTest target(s)).
     1>_VSTestConsole:
         MSB4181: The "VSTestTask" task returned false but did not log an error.
     1>Done Building Project "/home/rrj/src/github/rudironsoni/Synaxis/tests/InferenceGateway/Infrastructure.Tests/Synaxis.InferenceGateway.Infrastructure.Tests.csproj" (VSTest target(s)) -- FAILED.

Build FAILED.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:14.35
