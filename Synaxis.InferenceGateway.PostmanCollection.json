{
  "info": {
    "_postman_id": "synaxis-inference-gateway-v2",
    "name": "Synaxis Inference Gateway API",
    "description": "Comprehensive API collection for testing all Synaxis Inference Gateway endpoints with multiple examples showing parameter permutations",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": { "mode": "raw", "raw": "{\"email\": \"user@example.com\", \"password\": \"SecurePassword123!\"}" },
            "url": { "raw": "{{baseUrl}}/auth/register", "host": ["{{baseUrl}}"], "path": ["auth", "register"] }
          },
          "response": [
            { "name": "Success - New User", "status": "OK", "code": 200, "body": "{\"success\": true, \"userId\": \"550e8400-e29b-41d4-a716-446655440000\"}" },
            { "name": "Error - User Exists", "status": "Bad Request", "code": 400, "body": "{\"success\": false, \"message\": \"User already exists\"}" },
            { "name": "Error - Missing Fields", "status": "Bad Request", "code": 400, "body": "{\"success\": false, \"message\": \"Email and password are required\"}" }
          ]
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": { "mode": "raw", "raw": "{\"email\": \"user@example.com\", \"password\": \"SecurePassword123!\"}" },
            "url": { "raw": "{{baseUrl}}/auth/login", "host": ["{{baseUrl}}"], "path": ["auth", "login"] }
          },
          "response": [
            { "name": "Success - Valid Credentials", "status": "OK", "code": 200, "body": "{\"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\", \"user\": {\"id\": \"550e8400-e29b-41d4-a716-446655440000\", \"email\": \"admin@synaxis.ai\"}}" },
            { "name": "Error - Invalid Password", "status": "Unauthorized", "code": 401, "body": "{\"success\": false, \"message\": \"Invalid credentials\"}" },
            { "name": "Error - User Not Found", "status": "Unauthorized", "code": 401, "body": "{\"success\": false, \"message\": \"Invalid credentials\"}" }
          ]
        },
        {
          "name": "Dev Login",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": { "mode": "raw", "raw": "{\"email\": \"dev@localhost\"}" },
            "url": { "raw": "{{baseUrl}}/auth/dev-login", "host": ["{{baseUrl}}"], "path": ["auth", "dev-login"] }
          },
          "response": [
            { "name": "Success - Existing Dev User", "status": "OK", "code": 200, "body": "{\"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"}" },
            { "name": "Success - New Dev User Created", "status": "OK", "code": 200, "body": "{\"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\", \"message\": \"New dev user created\"}" }
          ]
        }
      ]
    },
    {
      "name": "Identity",
      "item": [
        {
          "name": "Identity Register",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{token}}"}],
            "body": { "mode": "raw", "raw": "{\"email\": \"user@organization.com\", \"password\": \"SecurePass123!\", \"organizationName\": \"My Organization\"}" },
            "url": { "raw": "{{baseUrl}}/identity/register", "host": ["{{baseUrl}}"], "path": ["identity", "register"] }
          },
          "response": [
            { "name": "Success - Org Registration", "status": "OK", "code": 200, "body": "{\"userId\": \"550e8400-e29b-41d4-a716-446655440000\", \"organizationId\": \"660e8400-e29b-41d4-a716-446655440001\", \"message\": \"Registration successful\"}" },
            { "name": "Error - Validation Failed", "status": "Bad Request", "code": 400, "body": "{\"errors\": [\"Email is required\", \"Password must be at least 8 characters\"]}" }
          ]
        },
        {
          "name": "Identity Login",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": { "mode": "raw", "raw": "{\"email\": \"user@organization.com\", \"password\": \"SecurePass123!\"}" },
            "url": { "raw": "{{baseUrl}}/identity/login", "host": ["{{baseUrl}}"], "path": ["identity", "login"] }
          },
          "response": [
            { "name": "Success - With Tokens", "status": "OK", "code": 200, "body": "{\"accessToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\", \"refreshToken\": \"dGhpcyBpcyBhIHJlZnJlc2ggdG9rZW4...\", \"expiresIn\": 3600, \"tokenType\": \"Bearer\"}" },
            { "name": "Error - Invalid Credentials", "status": "Unauthorized", "code": 401, "body": "{\"error\": \"Invalid email or password\"}" }
          ]
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": { "mode": "raw", "raw": "{\"refreshToken\": \"{{refreshToken}}\"}" },
            "url": { "raw": "{{baseUrl}}/identity/refresh", "host": ["{{baseUrl}}"], "path": ["identity", "refresh"] }
          },
          "response": [
            { "name": "Success - New Tokens", "status": "OK", "code": 200, "body": "{\"accessToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.new...\", \"refreshToken\": \"dGhpcyBpcyBhIHJlZnJlc2ggdG9rZW4.new...\", \"expiresIn\": 3600}" },
            { "name": "Error - Invalid Refresh Token", "status": "Unauthorized", "code": 401, "body": "{\"error\": \"Invalid or expired refresh token\"}" }
          ]
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
            "url": { "raw": "{{baseUrl}}/identity/me", "host": ["{{baseUrl}}"], "path": ["identity", "me"] }
          },
          "response": [
            { "name": "Success - User Profile", "status": "OK", "code": 200, "body": "{\"id\": \"550e8400-e29b-41d4-a716-446655440000\", \"email\": \"user@organization.com\", \"name\": \"John Doe\", \"role\": \"Owner\", \"organizations\": [{\"id\": \"660e8400-e29b-41d4-a716-446655440001\", \"name\": \"My Organization\", \"role\": \"Owner\"}]}" },
            { "name": "Error - Unauthorized", "status": "Unauthorized", "code": 401, "body": "{\"message\": \"Unauthorized\"}" }
          ]
        },
        {
          "name": "Get Organizations",
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
            "url": { "raw": "{{baseUrl}}/identity/organizations", "host": ["{{baseUrl}}"], "path": ["identity", "organizations"] }
          },
          "response": [
            { "name": "Success - Multiple Orgs", "status": "OK", "code": 200, "body": "[{\"id\": \"660e8400-e29b-41d4-a716-446655440001\", \"name\": \"My Organization\", \"role\": \"Owner\", \"memberCount\": 5}, {\"id\": \"770e8400-e29b-41d4-a716-446655440002\", \"name\": \"Client Project\", \"role\": \"Member\", \"memberCount\": 12}]" },
            { "name": "Success - Single Org", "status": "OK", "code": 200, "body": "[{\"id\": \"660e8400-e29b-41d4-a716-446655440001\", \"name\": \"Personal\", \"role\": \"Owner\"}]" }
          ]
        },
        {
          "name": "Switch Organization",
          "request": {
            "method": "POST",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
            "url": { "raw": "{{baseUrl}}/identity/organizations/{{organizationId}}/switch", "host": ["{{baseUrl}}"], "path": ["identity", "organizations", "{{organizationId}}", "switch"] }
          },
          "response": [
            { "name": "Success - Switch Notice", "status": "OK", "code": 200, "body": "{\"message\": \"Organization switch requires new login\", \"organizationId\": \"770e8400-e29b-41d4-a716-446655440002\"}" }
          ]
        }
      ]
    },
    {
      "name": "API Keys",
      "item": [
        {
          "name": "Create API Key",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{token}}"}],
            "body": { "mode": "raw", "raw": "{\"name\": \"Production API Key\"}" },
            "url": { "raw": "{{baseUrl}}/projects/{{projectId}}/keys", "host": ["{{baseUrl}}"], "path": ["projects", "{{projectId}}", "keys"] }
          },
          "response": [
            { "name": "Success - Key Created", "status": "OK", "code": 200, "body": "{\"id\": \"880e8400-e29b-41d4-a716-446655440003\", \"key\": \"sk-synaxis-abc123xyz789production\", \"name\": \"Production API Key\"}" },
            { "name": "Error - Project Not Found", "status": "Not Found", "code": 404, "body": "{\"message\": \"Project not found\"}" },
            { "name": "Error - Unauthorized", "status": "Unauthorized", "code": 401, "body": "{\"message\": \"Unauthorized\"}" }
          ]
        },
        {
          "name": "Revoke API Key",
          "request": {
            "method": "DELETE",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
            "url": { "raw": "{{baseUrl}}/projects/{{projectId}}/keys/{{keyId}}", "host": ["{{baseUrl}}"], "path": ["projects", "{{projectId}}", "keys", "{{keyId}}"] }
          },
          "response": [
            { "name": "Success - Key Revoked", "status": "No Content", "code": 204 },
            { "name": "Error - Key Not Found", "status": "Not Found", "code": 404, "body": "{\"message\": \"API Key not found\"}" }
          ]
        },
        {
          "name": "Generate API Key (Legacy)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{token}}"}],
            "body": { "mode": "raw", "raw": "{\"name\": \"Test Key\", \"permissions\": [\"read\", \"write\"], \"expiresInDays\": 30}" },
            "url": { "raw": "{{baseUrl}}/apikeys", "host": ["{{baseUrl}}"], "path": ["apikeys"] }
          },
          "response": [
            { "name": "Success - With Expiration", "status": "OK", "code": 200, "body": "{\"id\": \"880e8400-e29b-41d4-a716-446655440003\", \"key\": \"sk-synaxis-testkey123xyz\", \"name\": \"Test Key\", \"expiresAt\": \"2025-03-04T12:00:00Z\"}" },
            { "name": "Success - No Expiration", "status": "OK", "code": 200, "body": "{\"id\": \"990e8400-e29b-41d4-a716-446655440004\", \"key\": \"sk-synaxis-permanentkey456\", \"name\": \"Permanent Key\"}" },
            { "name": "Error - Org Required", "status": "Unauthorized", "code": 401, "body": "{\"error\": \"Organization context required\"}" }
          ]
        },
        {
          "name": "List API Keys",
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
            "url": { "raw": "{{baseUrl}}/apikeys?includeRevoked=false", "host": ["{{baseUrl}}"], "path": ["apikeys"], "query": [{"key": "includeRevoked", "value": "false"}] }
          },
          "response": [
            { "name": "Success - Active Only", "status": "OK", "code": 200, "body": "[{\"id\": \"880e8400-e29b-41d4-a716-446655440003\", \"name\": \"Production Key\", \"createdAt\": \"2025-01-01T00:00:00Z\", \"lastUsed\": \"2025-02-04T10:30:00Z\", \"status\": \"Active\"}]" },
            { "name": "Success - With Revoked", "status": "OK", "code": 200, "body": "[{\"id\": \"880e8400-e29b-41d4-a716-446655440003\", \"name\": \"Production Key\", \"status\": \"Active\"}, {\"id\": \"990e8400-e29b-41d4-a716-446655440004\", \"name\": \"Old Key\", \"status\": \"Revoked\", \"revokedAt\": \"2025-01-15T00:00:00Z\"}]" }
          ]
        },
        {
          "name": "Revoke API Key (Legacy)",
          "request": {
            "method": "DELETE",
            "header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{token}}"}],
            "body": { "mode": "raw", "raw": "{\"reason\": \"Key compromised - rotating for security\"}" },
            "url": { "raw": "{{baseUrl}}/apikeys/{{keyId}}", "host": ["{{baseUrl}}"], "path": ["apikeys", "{{keyId}}"] }
          },
          "response": [
            { "name": "Success - Revoked", "status": "OK", "code": 200, "body": "{\"message\": \"API key revoked successfully\"}" },
            { "name": "Error - Not Found", "status": "Not Found", "code": 404, "body": "{\"error\": \"API key not found\"}" }
          ]
        },
        {
          "name": "Get API Key Usage",
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
            "url": { "raw": "{{baseUrl}}/apikeys/{{keyId}}/usage?from=2025-01-01&to=2025-02-04", "host": ["{{baseUrl}}"], "path": ["apikeys", "{{keyId}}", "usage"], "query": [{"key": "from", "value": "2025-01-01"}, {"key": "to", "value": "2025-02-04"}] }
          },
          "response": [
            { "name": "Success - With Date Range", "status": "OK", "code": 200, "body": "{\"keyId\": \"880e8400-e29b-41d4-a716-446655440003\", \"totalRequests\": 15420, \"totalTokens\": 8923400, \"period\": {\"from\": \"2025-01-01\", \"to\": \"2025-02-04\"}, \"dailyUsage\": [{\"date\": \"2025-02-04\", \"requests\": 523, \"tokens\": 302100}]}" },
            { "name": "Success - Default Range (30 days)", "status": "OK", "code": 200, "body": "{\"keyId\": \"880e8400-e29b-41d4-a716-446655440003\", \"totalRequests\": 45230, \"totalTokens\": 26345000}" }
          ]
        }
      ]
    }
  ],
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:51121", "type": "string", "description": "Base URL for the Synaxis Inference Gateway API" },
    { "key": "token", "value": "", "type": "string", "description": "JWT Bearer token for authenticated requests" },
    { "key": "adminToken", "value": "", "type": "string", "description": "Admin JWT token for administrative operations" },
    { "key": "apiKey", "value": "", "type": "string", "description": "API Key for OpenAI-compatible endpoints" },
    { "key": "projectId", "value": "550e8400-e29b-41d4-a716-446655440000", "type": "string", "description": "Project ID for API key management" },
    { "key": "keyId", "value": "880e8400-e29b-41d4-a716-446655440003", "type": "string", "description": "API Key ID for operations on specific keys" },
    { "key": "organizationId", "value": "660e8400-e29b-41d4-a716-446655440001", "type": "string", "description": "Organization ID for identity operations" },
    { "key": "refreshToken", "value": "", "type": "string", "description": "Refresh token for obtaining new access tokens" },
    { "key": "requestId", "value": "aa0e8400-e29b-41d4-a716-446655440000", "type": "string", "description": "Provider request ID" }
  ]
}
