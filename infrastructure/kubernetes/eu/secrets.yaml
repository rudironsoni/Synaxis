# Synaxis API Secrets for EU Region
# Contains PostgreSQL, Redis, and application secrets
# All values are base64 encoded - replace with actual values from Terraform outputs
---
apiVersion: v1
kind: Secret
metadata:
  name: synaxis-db-credentials
  namespace: synaxis-eu
  labels:
    app: synaxis-api
    component: database
type: Opaque
data:
  # PostgreSQL connection details
  # Replace with actual values: echo -n "value" | base64
  POSTGRES_HOST: <base64-encoded-rds-endpoint>
  POSTGRES_PORT: NTQzMg== # 5432
  POSTGRES_DB: c3luYXhpcw== # synaxis
  POSTGRES_USER: c3luYXhpc19hZG1pbg== # synaxis_admin
  POSTGRES_PASSWORD: <base64-encoded-password>
  # Connection string format
  CONNECTION_STRING: <base64-encoded-full-connection-string>
---
apiVersion: v1
kind: Secret
metadata:
  name: synaxis-redis-credentials
  namespace: synaxis-eu
  labels:
    app: synaxis-api
    component: cache
type: Opaque
data:
  # Redis connection details
  REDIS_HOST: <base64-encoded-redis-endpoint>
  REDIS_PORT: NjM3OQ== # 6379
  REDIS_AUTH_TOKEN: <base64-encoded-auth-token>
  # Connection string with SSL
  REDIS_CONNECTION_STRING: <base64-encoded-connection-string>
---
apiVersion: v1
kind: Secret
metadata:
  name: synaxis-app-secrets
  namespace: synaxis-eu
  labels:
    app: synaxis-api
    component: application
type: Opaque
data:
  # JWT secret for authentication
  JWT_SECRET: <base64-encoded-jwt-secret>
  # Encryption keys
  ENCRYPTION_KEY: <base64-encoded-encryption-key>
  # API keys for providers (if needed)
  GROQ_API_KEY: <base64-encoded-groq-key>
  DEEPSEEK_API_KEY: <base64-encoded-deepseek-key>
---
# ConfigMap for non-sensitive configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: synaxis-config
  namespace: synaxis-eu
  labels:
    app: synaxis-api
data:
  # Application configuration
  ASPNETCORE_ENVIRONMENT: "Production"
  AWS_REGION: "eu-west-1"
  DATA_RESIDENCY: "EU"
  COMPLIANCE_MODE: "GDPR"
  # Logging configuration
  LOG_LEVEL: "Information"
  LOG_FORMAT: "Json"
  # Feature flags
  ENABLE_STREAMING: "true"
  ENABLE_RATE_LIMITING: "true"
  ENABLE_METRICS: "true"
  # Performance tuning
  MAX_CONCURRENT_REQUESTS: "1000"
  REQUEST_TIMEOUT_SECONDS: "30"
  # CORS configuration (adjust for your domains)
  CORS_ORIGINS: "https://synaxis.eu,https://api.synaxis.eu"
