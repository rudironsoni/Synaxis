apiVersion: v1
kind: Secret
metadata:
  name: postgres-credentials
  namespace: synaxis
  labels:
    app.kubernetes.io/name: synaxis
    app.kubernetes.io/component: database
type: Opaque
stringData:
  # These will be populated from AWS Secrets Manager via External Secrets Operator
  # or injected via Terraform/Helm during deployment
  DATABASE_HOST: "" # RDS endpoint
  DATABASE_PORT: "5432"
  DATABASE_NAME: "synaxis"
  DATABASE_USER: "" # From Secrets Manager
  DATABASE_PASSWORD: "" # From Secrets Manager
  DATABASE_SSL_MODE: "require"
  DATABASE_URL: "" # postgresql://user:password@host:port/dbname?sslmode=require

---
apiVersion: v1
kind: Secret
metadata:
  name: redis-credentials
  namespace: synaxis
  labels:
    app.kubernetes.io/name: synaxis
    app.kubernetes.io/component: cache
type: Opaque
stringData:
  # These will be populated from AWS Secrets Manager
  REDIS_HOST: "" # ElastiCache endpoint
  REDIS_PORT: "6379"
  REDIS_PASSWORD: "" # Auth token from Secrets Manager
  REDIS_TLS: "true"
  REDIS_URL: "" # rediss://:password@host:port

---
apiVersion: v1
kind: Secret
metadata:
  name: qdrant-credentials
  namespace: synaxis
  labels:
    app.kubernetes.io/name: synaxis
    app.kubernetes.io/component: vector-db
type: Opaque
stringData:
  # Qdrant configuration
  QDRANT_HOST: "" # Qdrant EC2 instance private IP
  QDRANT_PORT: "6333"
  QDRANT_GRPC_PORT: "6334"
  QDRANT_URL: "" # http://host:6333

---
apiVersion: v1
kind: Secret
metadata:
  name: synaxis-api-secrets
  namespace: synaxis
  labels:
    app.kubernetes.io/name: synaxis
    app.kubernetes.io/component: api
type: Opaque
stringData:
  # Application secrets
  JWT_SECRET: "" # JWT signing key
  API_KEY_SALT: "" # API key hashing salt
  ENCRYPTION_KEY: "" # Data encryption key
  AWS_REGION: "us-east-1"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: synaxis-api-config
  namespace: synaxis
  labels:
    app.kubernetes.io/name: synaxis
    app.kubernetes.io/component: api
data:
  ENVIRONMENT: "production"
  REGION: "us-east-1"
  LOG_LEVEL: "info"
  LOG_FORMAT: "json"
  
  # Server configuration
  SERVER_HOST: "0.0.0.0"
  SERVER_PORT: "8080"
  
  # Feature flags
  ENABLE_METRICS: "true"
  ENABLE_TRACING: "true"
  ENABLE_PROFILING: "false"
  
  # Rate limiting
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_REQUESTS: "100"
  RATE_LIMIT_WINDOW: "60s"
  
  # Connection pools
  DB_MAX_CONNECTIONS: "50"
  DB_MIN_CONNECTIONS: "10"
  DB_CONNECTION_TIMEOUT: "30s"
  
  REDIS_MAX_CONNECTIONS: "100"
  REDIS_MIN_CONNECTIONS: "10"
  
  # Request timeouts
  REQUEST_TIMEOUT: "30s"
  SHUTDOWN_TIMEOUT: "30s"
  
  # Health check configuration
  HEALTH_CHECK_PATH: "/health"
  READINESS_CHECK_PATH: "/ready"
  LIVENESS_CHECK_PATH: "/live"
